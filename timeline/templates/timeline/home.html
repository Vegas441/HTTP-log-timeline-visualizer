{% extends "timeline/base.html" %}
{% load static %}

{% block content %}

<div class="jumbotron">
    <a href="https://www.tietoevry.com/"><img id="tietoevry-logo" src="{% static 'timeline/tietoevry.png' %}" alt="Tietoevry"></a>
    <div class="container">
        <h1>Tietoevry - HTTP Log Timeline Visualizer</h1>
        <h3 style="color: #c3c3c3;"> <a class="jenkins-link" href="http://10.14.222.120:50088/">Jenkins</a> log generator</h3>
        <hr>

        
        <button type="button" class="btn btn-primary">Generate timelines</button>

        <button type="button" class="btn btn-danger">Delete timelines</button>
        
    </div>
</div>


<div class="container">
    <!-- For loop -->
    {% for timeline in timelines %}
        <div class="card bg-dark text-white">
            <div class="card-body">
                {{ timeline.IP }}
            </div>
        </div>

        
        
        <div class="row">
            <div class="col">
                <div class="timeline-steps aos-init aos-animate" data-aos="fade-up">

                    {% for log in logs %}

                    {% if log.timeline.IP  ==  timeline.IP %}
                        <div class="timeline-step">
                            <div class="timeline-content">
                                <a href="{% url 'timeline-log' %}"><div class="inner-circle"></div></a>
                                <a href="#" data-toggle="popover" data-html="true" title="{{ time }}" data-content="{{ hostname }} <br/> restLogger: {{ restLogger }} <br/> <br/> {{ type }}: {{ status_code }} <br/> <br/> hostname: {{ slave_hostname }} <br/> ip: {{ ip }} <br/> result: {{ result }} <br/> role: {{ role }}">
                                    <p class="h6 mt-3 mb-1">{{ log.dateTime|date:'Y-m-d H:i:s' }}</p>
                                </a>
                            </div>
                        </div>
                    {% endif %}

                    {% endfor %}

                    <!--
                    <div class="timeline-step">
                            <div class="timeline-content">
                                <a href="{% url 'timeline-log' %}"><div class="inner-circle"></div></a>
                                <a href="#" data-toggle="popover" data-html="true" title="{{ time }}" data-content="{{ hostname }} <br/> restLogger: {{ restLogger }} <br/> <br/> {{ type }}: {{ status_code }} <br/> <br/> hostname: {{ slave_hostname }} <br/> ip: {{ ip }} <br/> result: {{ result }} <br/> role: {{ role }}">
                                    <p class="h6 mt-3 mb-1">{{ time }}</p>
                                </a>
                            </div>
                    </div>

                    <div class="timeline-step">
                        <div class="timeline-content">
                            <div class="inner-circle"></div>
                            <p class="h6 mt-3 mb-1">2022-07-04 07:14:29.531+01:00</p>
                        </div>
                    </div>

                    <div class="timeline-step">
                        <div class="timeline-content">
                            <div class="inner-circle"></div>
                            <p class="h6 mt-3 mb-1">2022-07-04 07:14:29.534+01:00</p>
                        </div>
                    </div>

                    <div class="timeline-step step mb-0">
                        <div class="timeline-content">
                            <div class="inner-circle"></div>
                            <p class="h6 mt-3 mb-1">2022-07-04 07:14:29.538+01:00</p>
                        </div>
                    </div>
                    
                    -->

                </div>
            </div>
        </div>
    
    <!-- End loop -->
    {% endfor %}
</div>

{% endblock content %}